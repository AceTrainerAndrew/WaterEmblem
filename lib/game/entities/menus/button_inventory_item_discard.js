/** *  button_inventory_item_discard.js *  ----- */ig.module(    'game.entities.menus.button_inventory_item_discard').requires(    'plugins.button.button').defines(function() {    'use strict';    ig.global.EntityButton_inventory_item_discard = ig.Button.extend({        name: 'btn_inventory_item_discard',        text: ['Discard'],        pressedUp: function() {            var u = ig.game.units[ig.game.activeUnit].unitType === 'player' ? ig.game.units[ig.game.activeUnit] : ig.game.units[ig.game.activeUnit].unitType === 'enemy' ? ig.game.targetedUnit : null;            // Discard the item (delete the item from inventory IF it was selected). If enemy item drop is available, it is placed into the slot of the discarded item.            if(typeof u !== null) {                if(u.selectedItemIndex !== null) {                    if(ig.game.item_drop !== null) {                        console.log('Discarded ' + u.item[u.selectedItemIndex].name + ', obtained ' + ig.game.item_drop.name + '.');                        u.item[u.selectedItemIndex] = ig.game.item_drop;                        u.item_uses[u.selectedItemIndex] = ig.game.item_drop.uses;                        u.isEquipping = false;                        ig.game.units[ig.game.activeUnit].turnUsed = true;                    } else {                        console.log('Discarded ' + u.item[u.selectedItemIndex].name + '.');                        u.item[u.selectedItemIndex] = null;                        u.item_uses[u.selectedItemIndex] = 0;                    }                    ig.game.item_drop = null;                } else if(ig.game.item_drop !== null) {                    console.log('Discarded ' + ig.game.item_drop.name + '.');                    ig.game.item_drop = null;                    u.isEquipping = false;                    ig.game.units[ig.game.activeUnit].turnUsed = true;                }                // Recompute stats after dropping items                ig.game.recomputeStats(ig.game.units[ig.game.activeUnit]);                ig.game.units[ig.game.activeUnit].selectedItemIndex = null;                ig.game.units[ig.game.activeUnit].selectedWeapon = null;                ig.game.units[ig.game.activeUnit].isEquipping = false;                ig.global.killAllButtons(ig.Button);                ig.game.menuVisible = false;            }        }    });});